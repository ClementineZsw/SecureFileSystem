<!DOCTYPE html>
<html>
<head>
  <title>登录页面</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
  <h1>用户登录</h1>
  <form id="loginForm">
    <label for="userName">用户名:</label>
    <input type="text" id="userName" name="userName" required>
    <br>
    <label for="passWord">密码:</label>
    <input type="password" id="passWord" name="passWord" required>
    <br>
    <button type="submit">登录</button>
  </form>
  <div id="loginResult"></div>

  <script>
    $(document).ready(function() {
      $("#loginForm").submit(function(event) {
        event.preventDefault();
        
        // 获取输入的用户名和密码
        var userName = $("#userName").val();
        var passWord = $("#passWord").val();
        
        // 构建请求数据
        var requestData = {
          userName: userName,
          passWord: passWord
        };
        
        // 发送POST请求到登录接口
        $.ajax({
          type: "POST",
          url: "/login",
          data: JSON.stringify(requestData), // 将数据转换为JSON格式
          contentType: "application/json", // 设置请求头的Content-Type
          success: function(data) {
            // 处理登录响应
            if (data.code === 1) {
              $("#loginResult").text("登录成功: " + data.msg);
              var token = data.token; // 获取令牌
              // 这里可以将令牌存储在本地存储或会话存储中，以备将来使用
            } else {
              $("#loginResult").text("登录失败: " + data.msg);
            }
          },
          error: function(error) {
            console.error("登录请求失败:", error);
          }
        });
      });
    });
  </script>
</body>
</html>